webpackJsonp([3],{Jj2J:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("4650");e.default={data:function(){return{rows:[],item:{},department:{skus:[],url:""},rules:{url:[{required:!0,message:"请输入链接",trigger:"blur"}]},loading:!0,skuLoading:!0,showEditDialog:!1,showSkuDialog:!1,isEdit:!1,inputVisible:!1,inputValue:""}},methods:{fetchList:function(){var t=this,e=sessionStorage.getItem("ts_user_id");return(0,s.rest)({url:"/v1/inspect/"+e+"/url/list",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"GET"}).then(function(e){t.rows=e.data,t.loading=!1}).catch(function(e){t.$message.error(e.response.data.msg)})},fetchSku:function(t){var e=this,n=sessionStorage.getItem("ts_user_id");return(0,s.rest)({url:"/v1/inspect/"+n+"/url/sku?url="+t,headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"GET"}).then(function(t){e.department.skus=t.data.skus.value,e.department.sizes=t.data.sizes,e.loading=!1}).catch(function(t){e.$message.error(t.response.data.msg)})},addItem:function(t){var e=this,n=sessionStorage.getItem("ts_user_id");return(0,s.rest)({url:"/v1/inspect/"+n+"/url/add",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:t}).then(function(t){e.$message({message:"新增链接成功，请在列表中查看！",type:"success"})}).catch(function(t){e.$message.error(t.response.data.msg)})},updateItem:function(t){var e=this,n=sessionStorage.getItem("ts_user_id");return(0,s.rest)({url:"/v1/inspect/"+n+"/url/update",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:t}).then(function(t){e.$message({message:"编辑款式成功，请在列表中查看！",type:"success"})}).catch(function(t){e.$message.error(t.response.data.msg)})},deleteItem:function(t){var e=this,n=sessionStorage.getItem("ts_user_id");return(0,s.rest)({url:"/v1/inspect/"+n+"/url/delete",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:t}).then(function(t){e.$message({message:"删除链接成功，请在列表中查看！",type:"success"})}).catch(function(t){e.$message.error(t.response.data.msg)})},addSkus:function(t){var e=this,n=sessionStorage.getItem("ts_user_id");return(0,s.rest)({url:"/v1/inspect/"+n+"/department/mutiadd",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:t}).then(function(t){e.$message({message:"新增款式成功，请在列表中查看！",type:"success"})}).catch(function(t){e.$message.error(t.response.data.msg)})},updateSkusCollected:function(t){var e=this,n=sessionStorage.getItem("ts_user_id");return(0,s.rest)({url:"/v1/inspect/"+n+"/url/collected/update",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:t}).then(function(t){}).catch(function(t){e.$message.error(t.response.data.msg)})},checkoutUrlStatus:function(){var t=this,e=sessionStorage.getItem("ts_user_id");return(0,s.rest)({url:"/v1/inspect/"+e+"/url/status",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"GET"}).then(function(e){t.$message({message:"链接状态更新成功，请在列表中查看！",type:"success"})}).catch(function(e){t.$message.error(e.response.data.msg)})},onAddEvent:function(){this.item={url:"",status:!0},this.isEdit=!1,this.showEditDialog=!0,this.$refs.itemForm&&this.$refs.itemForm.clearValidate()},onUpdateStatusEvent:function(){var t=this;this.loading=!0,this.checkoutUrlStatus().then(function(e){t.fetchList(),t.loading=!1})},onEditEvent:function(t){this.item={index:t,url_id:this.rows[t].url_id,url:this.rows[t].url,status:this.rows[t].status},this.isEdit=!0,this.showEditDialog=!0,this.$refs.itemForm&&this.$refs.itemForm.clearValidate()},onSkuEvent:function(t){var e=this;this.skuLoading=!0,this.fetchSku(this.rows[t].url).then(function(n){e.department.url=e.rows[t].url,e.department.skus=e.department.skus.map(function(t){return t.sizes=e.department.sizes,t})}),console.log(this.department),this.skuLoading=!1,this.showSkuDialog=!0,this.$refs.itemForm&&this.$refs.itemForm.clearValidate()},onDialogComfirm:function(){var t=this;this.$refs.itemForm.validate(function(e){if(!e)return!1;if(t.isEdit){if(t.item.url===t.rows[t.item.index].url&&t.item.status===t.rows[t.item.index].status)return t.$message("无任何修改！"),!1;t.updateItem({url_id:t.item.url_id,url:t.item.url,status:t.item.status}).then(function(e){t.showEditDialog=!1,t.fetchList()})}else t.addItem(t.item).then(function(e){t.showEditDialog=!1,t.fetchList()})})},onSkuDialogComfirm:function(){var t=this;this.addSkus(this.department).then(function(e){t.fetchList()}),this.showSkuDialog=!1},onDelSkuEvent:function(t){this.department.skus.splice(this.department.skus.indexOf(t),1)},onDelEvent:function(t){var e=this;this.$confirm("本次操作将永久删除链接, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteItem({url_id:e.rows[t].url_id}).then(function(t){e.fetchList()})})},onDownloadEvent:function(t){var e=sessionStorage.getItem("ts_user_id");window.open("/v1/inspect/"+e+"/url/download?url="+this.rows[t].url)}},mounted:function(){this.fetchList()}}},ZgqL:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-authsManage-divisionsManage"},[n("div",{staticClass:"m-authsManage-divisionsManage-header"},[n("el-button",{staticClass:"add_btn",attrs:{type:"primary"},on:{click:t.onAddEvent}},[t._v("新增链接")]),t._v(" "),n("el-button",{staticClass:"add_btn",attrs:{type:"primary"},on:{click:t.onUpdateStatusEvent}},[t._v("检查链接")])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.rows,stripe:""}},[n("el-table-column",{attrs:{prop:"url_id",label:"ID",width:"80"}}),t._v(" "),n("el-table-column",{attrs:{label:"链接","min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{staticClass:"buttonText",attrs:{href:e.row.url,target:"scope.row.url"}},[t._v(t._s(e.row.url))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:e.row.type}},[t._v("\n          "+t._s(e.row.status)+"\n        ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"采集状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:e.row.type}},[t._v("\n          "+t._s(e.row.collected)+"\n        ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){return n.preventDefault(),t.onSkuEvent(e.$index)}}},[t._v("\n          生成款式\n        ")]),t._v(" "),n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){return n.preventDefault(),t.onDownloadEvent(e.$index)}}},[t._v("\n          采集图片\n        ")]),t._v(" "),n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){return n.preventDefault(),t.onEditEvent(e.$index)}}},[t._v("\n          编辑\n        ")]),t._v(" "),n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){return n.preventDefault(),t.onDelEvent(e.$index)}}},[t._v("\n          删除\n        ")])]}}])})],1),t._v(" "),n("el-dialog",{staticClass:"m-authsManage-divisionsManage-dialog",attrs:{"append-to-body":"",title:"isEdit?'编辑链接':'新增链接'",visible:t.showEditDialog},on:{"update:visible":function(e){t.showEditDialog=e}}},[n("el-form",{ref:"itemForm",attrs:{model:t.item,rules:t.rules,"label-position":"right","label-width":"80px"}},[t.isEdit?n("el-form-item",{attrs:{label:"ID"}},[n("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:t.item.url_id,callback:function(e){t.$set(t.item,"url_id",e)},expression:"item.url_id"}})],1):t._e(),t._v(" "),n("el-form-item",{attrs:{label:"链接",prop:"url"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.item.url,callback:function(e){t.$set(t.item,"url",e)},expression:"item.url"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"状态"}},[n("el-switch",{model:{value:t.item.status,callback:function(e){t.$set(t.item,"status",e)},expression:"item.status"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.showEditDialog=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.onDialogComfirm}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{staticClass:"m-authsManage-skus-dialog",attrs:{"append-to-body":"",title:"生成sku",visible:t.showSkuDialog},on:{"update:visible":function(e){t.showSkuDialog=e}}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.skuLoading,expression:"skuLoading"}],staticStyle:{width:"100%"},attrs:{data:t.department.skus,stripe:""}},[n("el-table-column",{attrs:{prop:"imageUrl",label:"款式图"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{placement:"right",title:"",trigger:"hover"}},[n("img",{staticStyle:{width:"300px",height:"auto",display:"block"},attrs:{src:e.row.imageUrl}}),t._v(" "),n("img",{staticStyle:{width:"70px",height:"auto",display:"block"},attrs:{slot:"reference",src:e.row.imageUrl,alt:e.row.imageUrl},slot:"reference"})])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"款式名"}}),t._v(" "),n("el-table-column",{attrs:{label:"尺码"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.sizes,function(e){return n("div",{key:e},[n("el-tag",[t._v("\n              "+t._s(e)+"\n            ")])],1)})}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){return n.preventDefault(),t.onDelSkuEvent(e.row)}}},[t._v("\n            删除\n          ")])]}}])})],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.showSkuDialog=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.onSkuDialogComfirm}},[t._v("确 定")])],1)],1)],1)},a=[],i={render:s,staticRenderFns:a};e.a=i},h9wy:function(t,e,n){e=t.exports=n("UTlt")(!0),e.push([t.i,"\n.m-authsManage-divisionsManage{\n   padding: 20px;\n}\n.m-authsManage-divisionsManage-header{\n   margin-bottom: 20px;\n}\n.m-authsManage-divisionsManage-dialog .el-input {\n   width: 300px;\n}\n.m-authsManage-divisionsManage-dialog .el-form {\n   padding: 20px;\n}\n.el-tag + .el-tag {\n   margin-left: 10px;\n}\n.button-new-sku {\n   margin-left: 10px;\n   height: 32px;\n   line-height: 30px;\n   padding-top: 0;\n   padding-bottom: 0;\n}\n.input-new-sku {\n   width: 90px;\n   margin-left: 10px;\n   vertical-align: bottom;\n}\n.m-authsManage-sku-dialog {\n  width: 600px;\n}\n.m-authsManage-sku-dialog .el-input {\n   width: 50px;\n}\n.m-authsManage-sku-dialog .el-form {\n   padding: 20px;\n}\n.m-authsManage-sku-dialog .el-checkbox{\n   display: block;\n   margin: 0 !important;\n}\n.cancel-btn {\n   position: absolute;\n   right: 110px;\n   top: 18px;\n}\n","",{version:3,sources:["D:/vue_source/sku-manage/src/modules/authsManage/urlManage.vue"],names:[],mappings:";AACA;GACG,cAAc;CAChB;AACD;GACG,oBAAoB;CACtB;AACD;GACG,aAAa;CACf;AACD;GACG,cAAc;CAChB;AACD;GACG,kBAAkB;CACpB;AACD;GACG,kBAAkB;GAClB,aAAa;GACb,kBAAkB;GAClB,eAAe;GACf,kBAAkB;CACpB;AACD;GACG,YAAY;GACZ,kBAAkB;GAClB,uBAAuB;CACzB;AACD;EACE,aAAa;CACd;AACD;GACG,YAAY;CACd;AACD;GACG,cAAc;CAChB;AACD;GACG,eAAe;GACf,qBAAqB;CACvB;AACD;GACG,mBAAmB;GACnB,aAAa;GACb,UAAU;CACZ",file:"urlManage.vue",sourcesContent:["\n.m-authsManage-divisionsManage{\n   padding: 20px;\n}\n.m-authsManage-divisionsManage-header{\n   margin-bottom: 20px;\n}\n.m-authsManage-divisionsManage-dialog .el-input {\n   width: 300px;\n}\n.m-authsManage-divisionsManage-dialog .el-form {\n   padding: 20px;\n}\n.el-tag + .el-tag {\n   margin-left: 10px;\n}\n.button-new-sku {\n   margin-left: 10px;\n   height: 32px;\n   line-height: 30px;\n   padding-top: 0;\n   padding-bottom: 0;\n}\n.input-new-sku {\n   width: 90px;\n   margin-left: 10px;\n   vertical-align: bottom;\n}\n.m-authsManage-sku-dialog {\n  width: 600px;\n}\n.m-authsManage-sku-dialog .el-input {\n   width: 50px;\n}\n.m-authsManage-sku-dialog .el-form {\n   padding: 20px;\n}\n.m-authsManage-sku-dialog .el-checkbox{\n   display: block;\n   margin: 0 !important;\n}\n.cancel-btn {\n   position: absolute;\n   right: 110px;\n   top: 18px;\n}\n"],sourceRoot:""}])},tep3:function(t,e,n){var s=n("h9wy");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);n("FIqI")("1df76ecf",s,!0,{})},yg1A:function(t,e,n){"use strict";function s(t){n("tep3")}Object.defineProperty(e,"__esModule",{value:!0});var a=n("Jj2J"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var r=n("ZgqL"),u=n("C7Lr"),l=s,d=u(i.a,r.a,!1,l,null,null);e.default=d.exports}});
//# sourceMappingURL=3.dda22fd77909dab12331.js.map