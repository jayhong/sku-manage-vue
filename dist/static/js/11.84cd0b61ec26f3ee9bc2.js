webpackJsonp([11],{dI1C:function(e,t,a){t=e.exports=a("FZ+f")(!0),t.push([e.i,"\n.m-carManage-carInfo {\n  padding: 20px;\n}\n.m-carManage-carInfo-header {\n  margin-bottom: 20px;\n}\n.m-carManage-carInfo-dialog .el-input {\n  width: 300px;\n}\n.m-carManage-carInfo-dialog .el-form {\n  padding: 20px;\n}\n.m-carManage-carInfo-apply-dialog .el-input {\n  width: 300px;\n}\n.m-carManage-carInfo-apply-dialog .el-form {\n  padding: 20px;\n}\n","",{version:3,sources:["/Users/wilen/wilen/more/Audit/src/modules/carManage/carInfo.vue"],names:[],mappings:";AACA;EACE,cAAc;CACf;AACD;EACE,oBAAoB;CACrB;AACD;EACE,aAAa;CACd;AACD;EACE,cAAc;CACf;AACD;EACE,aAAa;CACd;AACD;EACE,cAAc;CACf",file:"carInfo.vue",sourcesContent:["\n.m-carManage-carInfo {\n  padding: 20px;\n}\n.m-carManage-carInfo-header {\n  margin-bottom: 20px;\n}\n.m-carManage-carInfo-dialog .el-input {\n  width: 300px;\n}\n.m-carManage-carInfo-dialog .el-form {\n  padding: 20px;\n}\n.m-carManage-carInfo-apply-dialog .el-input {\n  width: 300px;\n}\n.m-carManage-carInfo-apply-dialog .el-form {\n  padding: 20px;\n}\n"],sourceRoot:""}])},ttG9:function(e,t,a){var r=a("dI1C");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("209921e3",r,!0)},vG8c:function(e,t,a){"use strict";function r(e){a("ttG9")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("4650"),o=a("JaHG"),n={data:function(){return{cols:[{prop:"car_id",label:"ID"},{prop:"car_license",label:"车牌号码"},{prop:"brand",label:"车辆品牌"},{prop:"model",label:"型号"},{prop:"color",label:"颜色"},{prop:"frame_number",label:"车架号"},{prop:"engine_number",label:"发动机号"},{prop:"car_status",label:"车辆状态"},{prop:"borrow_status",label:"是否可借用"}],rows:[],item:{},rules:{car_license:[{required:!0,message:"请输入车牌号码",trigger:"blur"}],brand:[{required:!0,message:"请输入车辆品牌",trigger:"blur"}],model:[{required:!0,message:"请输入车辆型号",trigger:"blur"}],color:[{required:!0,message:"请输入车辆颜色",trigger:"blur"}],frame_number:[{required:!0,message:"请输入车架号",trigger:"blur"}],engine_number:[{required:!0,message:"请输入发动机号",trigger:"blur"}],car_status:[{type:"number",required:!0,message:"请选择车辆状态",trigger:"change"}],borrow_status:[{type:"number",required:!0,message:"请选择借用状态",trigger:"change"}]},loading:!0,showEditDialog:!1,isEdit:!1,applyItem:{},rules_apply:{use:[{required:!0,message:"请输入申请用途",trigger:"blur"}],start:[{required:!0,message:"请选择开始日期",trigger:"change"}],end:[{required:!0,message:"请选择结束时间",trigger:"change"}]},showApplyDialog:!1}},computed:{rows_inShow:function(){var e=[];return this.rows.forEach(function(t){var a={};for(var r in t)a[r]="car_status"===r?t[r]?"押车":"拖车":"borrow_status"===r?t[r]?"已被借用":"可以借用":t[r];e.push(a)}),e}},methods:{fetchList:function(){var e=this,t=sessionStorage.getItem("ts_user_id");return Object(s.a)({url:"/v1/inspect/"+t+"/car/list",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"GET"}).then(function(t){e.rows=t.data.data,e.loading=!1}).catch(function(t){e.$message.error(t.response.data.msg)})},addItem:function(e){var t=this,a=sessionStorage.getItem("ts_user_id");return Object(s.a)({url:"/v1/inspect/"+a+"/car/create",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:e}).then(function(e){t.$message({message:"新增车辆信息成功，请在列表中查看！",type:"success"})}).catch(function(e){t.$message.error(e.response.data.msg)})},updateItem:function(e){var t=this,a=sessionStorage.getItem("ts_user_id");return delete e.index,Object(s.a)({url:"/v1/inspect/"+a+"/car/update",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:e}).then(function(e){t.$message({message:"编辑车辆信息成功，请在列表中查看！",type:"success"})}).catch(function(e){t.$message.error(e.response.data.msg)})},deleteItem:function(e){var t=this,a=sessionStorage.getItem("ts_user_id");return Object(s.a)({url:"/v1/inspect/"+a+"/car/del",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:e}).then(function(e){t.$message({message:"删除车辆信息成功，请在列表中查看！",type:"success"})}).catch(function(e){t.$message.error(e.response.data.msg)})},addApplyItem:function(e){var t=this,a=sessionStorage.getItem("ts_user_id");return Object(s.a)({url:"/v1/inspect/"+a+"/car_apply/create",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:e}).then(function(e){t.$message({message:"新增车辆申请成功，请在往车辆申请列表中查看！",type:"success"})}).catch(function(e){t.$message.error(e.response.data.msg)})},onAddEvent:function(){this.item={borrow_status:null,brand:"",car_license:"",car_status:null,color:"",engine_number:"",frame_number:"",model:""},this.isEdit=!1,this.showEditDialog=!0,this.$refs.itemForm&&this.$refs.itemForm.clearValidate()},onEditEvent:function(e){this.item={index:e,car_id:this.rows[e].car_id,borrow_status:this.rows[e].borrow_status,brand:this.rows[e].brand,car_license:this.rows[e].car_license,car_status:this.rows[e].car_status,color:this.rows[e].color,engine_number:this.rows[e].engine_number,frame_number:this.rows[e].frame_number,model:this.rows[e].model},this.isEdit=!0,this.showEditDialog=!0,this.$refs.itemForm&&this.$refs.itemForm.clearValidate()},onDialogComfirm:function(){var e=this;this.$refs.itemForm.validate(function(t){if(!t)return!1;if(e.isEdit){if(e.rows[e.item.index].index=e.item.index,Object(o.d)(e.rows[e.item.index],e.item))return e.$message("无任何修改！"),!1;e.updateItem(e.item).then(function(t){e.showEditDialog=!1,e.fetchList()})}else e.addItem(e.item).then(function(t){e.showEditDialog=!1,e.fetchList()})})},onDelEvent:function(e){var t=this;this.$confirm("本次操作将永久删除该车辆信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteItem({car_id:t.rows[e].car_id}).then(function(e){t.fetchList()})})},onApplyEvent:function(e){this.applyItem={car_id:this.rows[e].car_id,use:"",start:null,end:null},this.showApplyDialog=!0,this.$refs.applyItemForm&&this.$refs.applyItemForm.clearValidate()},onApplyDialogComfirm:function(){var e=this;this.$refs.applyItemForm.validate(function(t){if(!t)return!1;e.addApplyItem(e.applyItem).then(function(t){e.showApplyDialog=!1,e.fetchList()})})}},mounted:function(){this.fetchList()}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-carManage-carInfo"},[a("div",{staticClass:"m-carManage-carInfo-header"},[a("el-button",{staticClass:"add_btn",attrs:{type:"primary"},on:{click:e.onAddEvent}},[e._v("新增车辆信息")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.rows_inShow,stripe:""}},[e._l(e.cols,function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,width:e.width}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){a.preventDefault(),e.onEditEvent(t.$index)}}},[e._v("\n          编辑\n        ")]),e._v(" "),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){a.preventDefault(),e.onDelEvent(t.$index)}}},[e._v("\n          删除\n        ")])]}}])})],2),e._v(" "),a("el-dialog",{staticClass:"m-carManage-carInfo-dialog",attrs:{"append-to-body":"",title:e.isEdit?"编辑车辆信息":"新增车辆信息",visible:e.showEditDialog},on:{"update:visible":function(t){e.showEditDialog=t}}},[a("el-form",{ref:"itemForm",attrs:{model:e.item,rules:e.rules,"label-position":"right","label-width":"100px"}},[e.isEdit?a("el-form-item",{attrs:{label:"ID"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:e.item.car_id,callback:function(t){e.$set(e.item,"car_id",t)},expression:"item.car_id"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"车牌号码",prop:"car_license"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.item.car_license,callback:function(t){e.$set(e.item,"car_license",t)},expression:"item.car_license"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"车辆品牌",prop:"brand"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.item.brand,callback:function(t){e.$set(e.item,"brand",t)},expression:"item.brand"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"型号",prop:"model"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.item.model,callback:function(t){e.$set(e.item,"model",t)},expression:"item.model"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"颜色",prop:"color"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.item.color,callback:function(t){e.$set(e.item,"color",t)},expression:"item.color"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"车架号",prop:"frame_number"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.item.frame_number,callback:function(t){e.$set(e.item,"frame_number",t)},expression:"item.frame_number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发动机型号",prop:"engine_number"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.item.engine_number,callback:function(t){e.$set(e.item,"engine_number",t)},expression:"item.engine_number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"车辆状态",prop:"car_status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.item.car_status,callback:function(t){e.$set(e.item,"car_status",t)},expression:"item.car_status"}},[a("el-option",{attrs:{label:"拖车",value:0}}),e._v(" "),a("el-option",{attrs:{label:"押车",value:1}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否可借用",prop:"borrow_status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.item.borrow_status,callback:function(t){e.$set(e.item,"borrow_status",t)},expression:"item.borrow_status"}},[a("el-option",{attrs:{label:"是",value:0}}),e._v(" "),a("el-option",{attrs:{label:"否",value:1}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showEditDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onDialogComfirm}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"m-carManage-carInfo-apply-dialog",attrs:{"append-to-body":"",title:"车辆申请",visible:e.showApplyDialog},on:{"update:visible":function(t){e.showApplyDialog=t}}},[a("el-form",{ref:"applyItemForm",attrs:{model:e.applyItem,rules:e.rules_apply,"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"车辆ID"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:e.applyItem.car_id,callback:function(t){e.$set(e.applyItem,"car_id",t)},expression:"applyItem.car_id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"申请用途",prop:"use"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.applyItem.use,callback:function(t){e.$set(e.applyItem,"use",t)},expression:"applyItem.use"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"start"}},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.applyItem.start,callback:function(t){e.$set(e.applyItem,"start",t)},expression:"applyItem.start"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"end"}},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.applyItem.end,callback:function(t){e.$set(e.applyItem,"end",t)},expression:"applyItem.end"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showApplyDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onApplyDialogComfirm}},[e._v("确 定")])],1)],1)],1)},l=[],c={render:i,staticRenderFns:l},m=c,p=a("VU/8"),u=r,d=p(n,m,!1,u,null,null);t.default=d.exports}});
//# sourceMappingURL=11.84cd0b61ec26f3ee9bc2.js.map