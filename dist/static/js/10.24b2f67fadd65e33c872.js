webpackJsonp([10],{"AH/L":function(e,t,a){"use strict";function n(e){a("lZ8G")}Object.defineProperty(t,"__esModule",{value:!0});var o=a("4650"),r=a("JaHG"),i={data:function(){return{cols:[{prop:"customer_number",label:"客户编号"},{prop:"name",label:"姓名"},{prop:"sex",label:"性别",formatter:function(e,t,a){return Object(r.f)(a)},width:50},{prop:"birth",label:"出生日期",width:100},{prop:"chuanzhen",label:"传真",width:100},{prop:"phone",label:"手机号码",width:120},{prop:"id_card_num",label:"身份证号码",width:130},{prop:"bank_card_num",label:"银行卡号码",width:130},{prop:"bank",label:"银行"},{prop:"bank_name",label:"开户人"},{prop:"commit",label:"备注"}],rows:[],rules:{name:[{required:!0,message:"请输入客户姓名",trigger:"blur"}],sex:[{type:"number",required:!0,message:"请选择性别",trigger:"change"}],birth:[{required:!0,message:"请输入客户出生日期",trigger:"change"}],chuanzhen:[{required:!0,message:"请输入客户传真",trigger:"blur"}],phone:[{required:!0,message:"请输入客户手机",trigger:"blur"}],id_card_num:[{required:!0,message:"请输入客户身份证",trigger:"blur"}],bank_card_num:[{required:!0,message:"请输入客户银行卡号码",trigger:"blur"}],bank:[{required:!0,message:"请输入银行名称",trigger:"blur"}],bank_name:[{required:!0,message:"请输入开户人姓名",trigger:"blur"}]},loading:!0,item:{},showEditDialog:!1,page:1,page_size:10,total:0,search:{name:"",customer_number:"",phone:""},keyword:"",selected:null}},computed:{rows_inShow:function(){var e=[];return this.rows.forEach(function(t){var a={};for(var n in t)a[n]="car_status"===n?t[n]?"押车":"拖车":"borrow_status"===n?t[n]?"已被借用":"可以借用":t[n];e.push(a)}),e}},methods:{fetchList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:this.page,page_size:this.page_size,name:this.search.name,customer_number:this.search.customer_number,phone:this.search.phone},a=sessionStorage.getItem("ts_user_id");return Object(o.a)({url:"/v1/inspect/"+a+"/customer",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:t}).then(function(t){e.rows=t.data.data,e.total=t.data.total,e.loading=!1}).catch(function(t){e.$message.error(t.response.data.msg)})},updateItem:function(e){var t=this,a=sessionStorage.getItem("ts_user_id");return Object(o.a)({url:"/v1/inspect/"+a+"/customer/update",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:e}).then(function(e){t.$message({message:"编辑客户信息成功，请在列表中查看！",type:"success"}),t.fetchList(),t.showEditDialog=!1}).catch(function(e){t.$message.error(e.response.data.msg)})},handlePageChange:function(e){this.page=e,this.fetchList()},handleSearch:function(){if(!this.selected)return void this.$message("请先选择搜索类型！");this.search[this.selected]=this.keyword,1==this.page?this.fetchList():this.page=1},onEditEvent:function(e){this.item={customer_id:this.rows[e].customer_id,customer_number:this.rows[e].customer_number,chuanzhen:this.rows[e].chuanzhen,name:this.rows[e].name,commit:this.rows[e].commit,sex:this.rows[e].sex,birth:this.rows[e].birth,phone:this.rows[e].phone,id_card_num:this.rows[e].id_card_num,bank_card_num:this.rows[e].bank_card_num,bank:this.rows[e].bank,bank_name:this.rows[e].bank_name},this.isEdit=!0,this.showEditDialog=!0,this.$refs.itemForm&&this.$refs.itemForm.clearValidate()},onDialogComfirm:function(){var e=this;this.$refs.itemForm.validate(function(t){if(!t)return!1;e.updateItem(e.item)})}},mounted:function(){this.fetchList()}},s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-tongji-customer"},[a("div",{staticClass:"search",staticStyle:{margin:"15px 0",width:"300px",display:"inline-block"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入搜索内容"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[a("el-option",{attrs:{label:"姓名",value:"name"}}),e._v(" "),a("el-option",{attrs:{label:"编号",value:"customer_number"}}),e._v(" "),a("el-option",{attrs:{label:"手机",value:"phone"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearch},slot:"append"})],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.rows_inShow,stripe:""}},[e._l(e.cols,function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,formatter:e.formatter,width:e.width}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){a.preventDefault(),e.onEditEvent(t.$index)}}},[e._v("\n          编辑\n        ")])]}}])})],2),e._v(" "),a("el-pagination",{staticStyle:{margin:"20px 0","text-align":"center"},attrs:{background:"","page-size":e.page_size,total:e.total,layout:"prev, pager, next","current-page":e.page},on:{"current-change":e.handlePageChange}}),e._v(" "),a("el-dialog",{staticClass:"m-tongji-customer-dialog",attrs:{"append-to-body":"",title:"编辑客户信息",visible:e.showEditDialog},on:{"update:visible":function(t){e.showEditDialog=t}}},[a("el-form",{ref:"itemForm",attrs:{model:e.item,rules:e.rules,"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"客户编号"}},[a("strong",[e._v(e._s(this.item.customer_number))])]),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.item.sex,callback:function(t){e.$set(e.item,"sex",t)},expression:"item.sex"}},[a("el-option",{attrs:{label:"男",value:1}}),e._v(" "),a("el-option",{attrs:{label:"女",value:0}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期",prop:"birth"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.item.birth,callback:function(t){e.$set(e.item,"birth",t)},expression:"item.birth"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"传真",prop:"chuanzhen"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.item.chuanzhen,callback:function(t){e.$set(e.item,"chuanzhen",t)},expression:"item.chuanzhen"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.item.phone,callback:function(t){e.$set(e.item,"phone",t)},expression:"item.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号码",prop:"id_card_num"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.item.id_card_num,callback:function(t){e.$set(e.item,"id_card_num",t)},expression:"item.id_card_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"银行卡号码",prop:"bank_card_num"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.item.bank_card_num,callback:function(t){e.$set(e.item,"bank_card_num",t)},expression:"item.bank_card_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"银行",prop:"bank"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.item.bank,callback:function(t){e.$set(e.item,"bank",t)},expression:"item.bank"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开户人",prop:"bank_name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.item.bank_name,callback:function(t){e.$set(e.item,"bank_name",t)},expression:"item.bank_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容","auto-complete":"off"},model:{value:e.item.commit,callback:function(t){e.$set(e.item,"commit",t)},expression:"item.commit"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showEditDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onDialogComfirm}},[e._v("确 定")])],1)],1)],1)},l=[],m={render:s,staticRenderFns:l},c=m,u=a("VU/8"),p=n,d=u(i,c,!1,p,null,null);t.default=d.exports},lZ8G:function(e,t,a){var n=a("y26r");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("40cc8760",n,!0)},y26r:function(e,t,a){t=e.exports=a("FZ+f")(!0),t.push([e.i,"\n.m-tongji-customer {\n  padding: 20px;\n}\n.m-tongji-customer-header {\n  margin-bottom: 20px;\n}\n.m-tongji-customer .el-table td{\n  padding: 5px 0;\n}\n.m-tongji-customer .el-input-group__prepend{\n  width: 50px;\n}\n.m-tongji-customer-dialog .el-input {\n  width: 300px;\n}\n.m-tongji-customer-dialog .el-form {\n  padding: 20px;\n}\n","",{version:3,sources:["/Users/wilen/wilen/more/Audit/src/modules/tongji/customer.vue"],names:[],mappings:";AACA;EACE,cAAc;CACf;AACD;EACE,oBAAoB;CACrB;AACD;EACE,eAAe;CAChB;AACD;EACE,YAAY;CACb;AACD;EACE,aAAa;CACd;AACD;EACE,cAAc;CACf",file:"customer.vue",sourcesContent:["\n.m-tongji-customer {\n  padding: 20px;\n}\n.m-tongji-customer-header {\n  margin-bottom: 20px;\n}\n.m-tongji-customer .el-table td{\n  padding: 5px 0;\n}\n.m-tongji-customer .el-input-group__prepend{\n  width: 50px;\n}\n.m-tongji-customer-dialog .el-input {\n  width: 300px;\n}\n.m-tongji-customer-dialog .el-form {\n  padding: 20px;\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=10.24b2f67fadd65e33c872.js.map