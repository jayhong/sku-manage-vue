webpackJsonp([8],{KERp:function(e,t,i){t=e.exports=i("FZ+f")(!0),t.push([e.i,"\n.m-tongji-recive {\n  padding: 20px;\n}\n.m-tongji-recive-header {\n  margin-bottom: 20px;\n}\n.m-tongji-recive .el-table td{\n  padding: 5px 0;\n}\n.m-tongji-recive .el-input-group__prepend{\n  width: 50px;\n}\n.m-tongji-recive-dialog .el-input {\n  width: 300px;\n}\n.m-tongji-recive-dialog .number-input .el-input {\n  width: 100%;\n}\n.m-tongji-recive-dialog .el-form {\n  padding: 20px;\n}\n","",{version:3,sources:["/Users/wilen/wilen/more/Audit/src/modules/tongji/recive.vue"],names:[],mappings:";AACA;EACE,cAAc;CACf;AACD;EACE,oBAAoB;CACrB;AACD;EACE,eAAe;CAChB;AACD;EACE,YAAY;CACb;AACD;EACE,aAAa;CACd;AACD;EACE,YAAY;CACb;AACD;EACE,cAAc;CACf",file:"recive.vue",sourcesContent:["\n.m-tongji-recive {\n  padding: 20px;\n}\n.m-tongji-recive-header {\n  margin-bottom: 20px;\n}\n.m-tongji-recive .el-table td{\n  padding: 5px 0;\n}\n.m-tongji-recive .el-input-group__prepend{\n  width: 50px;\n}\n.m-tongji-recive-dialog .el-input {\n  width: 300px;\n}\n.m-tongji-recive-dialog .number-input .el-input {\n  width: 100%;\n}\n.m-tongji-recive-dialog .el-form {\n  padding: 20px;\n}\n"],sourceRoot:""}])},gxYQ:function(e,t,i){var r=i("KERp");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);i("rjj0")("2ec74eea",r,!0)},qM4K:function(e,t,i){"use strict";function r(e){i("gxYQ")}Object.defineProperty(t,"__esModule",{value:!0});var n=i("4650"),o=i("JaHG"),s={data:function(){return{cols:[{prop:"customer_number",label:"客户编号"},{prop:"customer_name",label:"姓名"},{prop:"receive_money",label:"收款金额(本金)",formatter:function(e,t,i){return Object(o.b)(i)},width:130},{prop:"receive_interest",label:"收款(利息)",formatter:function(e,t,i){return Object(o.b)(i)},width:130},{prop:"receive_other",label:"收款(其他) ",formatter:function(e,t,i){return Object(o.b)(i)},width:130},{prop:"reveive_date",label:"收款日期",width:130},{prop:"commit",label:"摘要"}],rows:[],rules:{customer_name:[{required:!0,message:"请输入客户姓名",trigger:"blur"}],receive_money:[{type:"number",required:!0,message:"请输入收款金额(本金)",trigger:"blur"}],receive_interest:[{type:"number",required:!0,message:"请输入收款(利息)",trigger:"blur"}],receive_other:[{type:"number",required:!0,message:"请输入收款(其他)",trigger:"blur"}],reveive_date:[{required:!0,message:"请输入收款日期",trigger:"change"}]},loading:!0,item:{},isEdit:!0,showEditDialog:!1,page:1,page_size:10,total:0,search:{name:"",customer_number:"",phone:""},keyword:"",selected:null}},computed:{rows_inShow:function(){var e=[];return this.rows.forEach(function(t){var i={};for(var r in t)i[r]="car_status"===r?t[r]?"押车":"拖车":"borrow_status"===r?t[r]?"已被借用":"可以借用":t[r];e.push(i)}),e}},methods:{fetchList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:this.page,page_size:this.page_size,customer_number:this.search.customer_number,customer_name:this.search.customer_name},i=sessionStorage.getItem("ts_user_id");return Object(n.a)({url:"/v1/inspect/"+i+"/recive",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:t}).then(function(t){e.rows=t.data.data,e.total=t.data.total,e.loading=!1}).catch(function(t){e.$message.error(t.response.data.msg)})},updateItem:function(e){var t=this,i=sessionStorage.getItem("ts_user_id");return Object(n.a)({url:"/v1/inspect/"+i+"/recive/update",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:e}).then(function(e){t.$message({message:"编辑收款信息成功，请在列表中查看！",type:"success"}),t.fetchList(),t.showEditDialog=!1}).catch(function(e){t.$message.error(e.response.data.msg)})},handlePageChange:function(e){this.page=e,this.fetchList()},handleSearch:function(){if(!this.selected)return void this.$message("请先选择搜索类型！");this.search[this.selected]=this.keyword,1==this.page?this.fetchList():this.page=1},onEditEvent:function(e){"add"===e?(this.isEdit=!1,this.item={customer_number:this.rows[e].customer_number,customer_name:this.rows[e].customer_name,commit:this.rows[e].commit,receive_money:this.rows[e].receive_money,receive_interest:this.rows[e].receive_interest,receive_other:this.rows[e].receive_other,reveive_date:this.rows[e].reveive_date}):this.isEdit=!0,this.item={receive_money_id:this.rows[e].receive_money_id,customer_number:this.rows[e].customer_number,customer_name:this.rows[e].customer_name,commit:this.rows[e].commit,receive_money:this.rows[e].receive_money,receive_interest:this.rows[e].receive_interest,receive_other:this.rows[e].receive_other,reveive_date:this.rows[e].reveive_date},this.isEdit=!0,this.showEditDialog=!0,this.$refs.itemForm&&this.$refs.itemForm.clearValidate()},onDialogComfirm:function(){var e=this;this.$refs.itemForm.validate(function(t){if(!t)return!1;e.updateItem(e.item)})}},mounted:function(){this.fetchList()}},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"m-tongji-recive"},[i("el-button",{staticClass:"add_btn",attrs:{type:"primary"},on:{click:function(t){e.onEditEvent("add")}}},[e._v("新增收款信息")]),e._v(" "),i("div",{staticClass:"search",staticStyle:{margin:"15px 0",width:"300px",display:"inline-block"}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入搜索内容"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[i("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[i("el-option",{attrs:{label:"客户姓名",value:"customer_name"}}),e._v(" "),i("el-option",{attrs:{label:"客户编号",value:"customer_number"}})],1),e._v(" "),i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearch},slot:"append"})],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.rows_inShow,stripe:""}},[e._l(e.cols,function(e){return i("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,formatter:e.formatter,width:e.width}})}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){i.preventDefault(),e.onEditEvent(t.$index)}}},[e._v("\n          编辑\n        ")])]}}])})],2),e._v(" "),i("el-pagination",{staticStyle:{margin:"20px 0","text-align":"center"},attrs:{background:"","page-size":e.page_size,total:e.total,layout:"prev, pager, next","current-page":e.page},on:{"current-change":e.handlePageChange}}),e._v(" "),i("el-dialog",{staticClass:"m-tongji-recive-dialog",attrs:{"append-to-body":"",title:(e.isEdit?"编辑":"新增")+"收款信息",visible:e.showEditDialog},on:{"update:visible":function(t){e.showEditDialog=t}}},[i("el-form",{ref:"itemForm",attrs:{model:e.item,rules:e.rules,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"客户编号"}},[i("strong",[e._v(e._s(this.item.customer_number))])]),e._v(" "),i("el-form-item",{attrs:{label:"客户姓名",prop:"customer_name"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.item.customer_name,callback:function(t){e.$set(e.item,"customer_name",t)},expression:"item.customer_name"}})],1),e._v(" "),i("el-form-item",{staticClass:"number-input",attrs:{label:"收款金额(本金)",prop:"receive_money"}},[i("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.item.receive_money,callback:function(t){e.$set(e.item,"receive_money",t)},expression:"item.receive_money"}})],1),e._v(" "),i("el-form-item",{staticClass:"number-input",attrs:{label:"收款(利息)",prop:"receive_interest"}},[i("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.item.receive_interest,callback:function(t){e.$set(e.item,"receive_interest",t)},expression:"item.receive_interest"}})],1),e._v(" "),i("el-form-item",{staticClass:"number-input",attrs:{label:"收款(其他)",prop:"receive_other"}},[i("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.item.receive_other,callback:function(t){e.$set(e.item,"receive_other",t)},expression:"item.receive_other"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"收款日期",prop:"reveive_date"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.item.reveive_date,callback:function(t){e.$set(e.item,"reveive_date",t)},expression:"item.reveive_date"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注"}},[i("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容","auto-complete":"off"},model:{value:e.item.commit,callback:function(t){e.$set(e.item,"commit",t)},expression:"item.commit"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.showEditDialog=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.onDialogComfirm}},[e._v("确 定")])],1)],1)],1)},l=[],c={render:a,staticRenderFns:l},m=c,u=i("VU/8"),d=r,p=u(s,m,!1,d,null,null);t.default=p.exports}});
//# sourceMappingURL=8.eaba7ff16fb16ad5ea99.js.map