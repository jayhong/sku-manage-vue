webpackJsonp([9],{Vs6A:function(t,e,n){var a=n("lwxN");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("c03659cc",a,!0)},lwxN:function(t,e,n){e=t.exports=n("FZ+f")(!0),e.push([t.i,"\n.m-tongji-loan {\n  padding: 20px;\n}\n.m-tongji-loan-header {\n  margin-bottom: 20px;\n}\n.m-tongji-loan .el-table td{\n  padding: 5px 0;\n}\n.m-tongji-loan .el-input-group__prepend{\n  width: 50px;\n}\n.m-tongji-loan-dialog .el-input {\n  width: 300px;\n}\n.m-tongji-loan-dialog .el-form {\n  padding: 20px;\n}\n","",{version:3,sources:["/Users/wilen/wilen/more/Audit/src/modules/tongji/loan.vue"],names:[],mappings:";AACA;EACE,cAAc;CACf;AACD;EACE,oBAAoB;CACrB;AACD;EACE,eAAe;CAChB;AACD;EACE,YAAY;CACb;AACD;EACE,aAAa;CACd;AACD;EACE,cAAc;CACf",file:"loan.vue",sourcesContent:["\n.m-tongji-loan {\n  padding: 20px;\n}\n.m-tongji-loan-header {\n  margin-bottom: 20px;\n}\n.m-tongji-loan .el-table td{\n  padding: 5px 0;\n}\n.m-tongji-loan .el-input-group__prepend{\n  width: 50px;\n}\n.m-tongji-loan-dialog .el-input {\n  width: 300px;\n}\n.m-tongji-loan-dialog .el-form {\n  padding: 20px;\n}\n"],sourceRoot:""}])},yv5t:function(t,e,n){"use strict";function a(t){n("Vs6A")}Object.defineProperty(e,"__esModule",{value:!0});var o=n("4650"),i=n("JaHG"),r={data:function(){return{cols:[{prop:"customer_number",label:"客户编号"},{prop:"customer_name",label:"姓名",width:80},{prop:"company",label:"公司",width:120},{prop:"user_name",label:"业务员",width:120},{prop:"contract_number",label:"合同编号",width:120},{prop:"loan_money",label:"借款金额",width:100,formatter:function(t,e,n){return Object(i.b)(n)}},{prop:"procedure_fee",label:"手续费",width:100,formatter:function(t,e,n){return Object(i.b)(n)}},{prop:"mortgage_registration",label:"登记费",width:100,formatter:function(t,e,n){return Object(i.b)(n)}},{prop:"other_fee",label:"其他费用",width:100,formatter:function(t,e,n){return Object(i.b)(n)}},{prop:"money",label:"收款（本金）",width:120,formatter:function(t,e,n){return Object(i.b)(n)}},{prop:"Interest",label:"收款（利息）",width:120,formatter:function(t,e,n){return Object(i.b)(n)}},{prop:"other_money",label:"收款（其他）",width:120,formatter:function(t,e,n){return Object(i.b)(n)}},{prop:"balance",label:"余额",width:100,formatter:function(t,e,n){return Object(i.b)(n)}},{prop:"benfit_rate",label:"毛利率",width:100},{prop:"loan_start",label:"借款开始日期",width:120},{prop:"loan_end",label:"借款结束日期",width:120},{prop:"loan_status",label:"借款状态",formatter:function(t,e,n){return n?"已到期":"未到期"}},{prop:"comment",label:"备注",width:150}],rows:[],loading:!0,item:{},showEditDialog:!1,page:1,page_size:10,total:0,search:{name:"",customer_number:"",phone:""},keyword:"",selected:null}},filters:{currencyDisplay:i.b},computed:{rows_inShow:function(){var t=[];return this.rows.forEach(function(e){var n={};for(var a in e)n[a]="car_status"===a?e[a]?"押车":"拖车":"borrow_status"===a?e[a]?"已被借用":"可以借用":e[a];t.push(n)}),t}},methods:{fetchList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:this.page,page_size:this.page_size,name:this.search.name,customer_number:this.search.customer_number,phone:this.search.phone},n=sessionStorage.getItem("ts_user_id");return Object(o.a)({url:"/v1/inspect/"+n+"/loan_detail",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:e}).then(function(e){t.rows=e.data.data,t.total=e.data.total,t.loading=!1}).catch(function(e){t.$message.error(e.response.data.msg)})},updateItem:function(t){var e=this,n=sessionStorage.getItem("ts_user_id");return Object(o.a)({url:"/v1/inspect/"+n+"/loan_detail/comment",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:t}).then(function(t){e.$message({message:"编辑放款明细表备注成功，请在列表中查看！",type:"success"}),e.fetchList(),e.showEditDialog=!1}).catch(function(t){e.$message.error(t.response.data.msg)})},handlePageChange:function(t){this.page=t,this.fetchList()},handleSearch:function(){if(!this.selected)return void this.$message("请先选择搜索类型！");this.search[this.selected]=this.keyword,1==this.page?this.fetchList():this.page=1},onEditEvent:function(t){this.item=this.rows[t],this.isEdit=!0,this.showEditDialog=!0,this.$refs.itemForm&&this.$refs.itemForm.clearValidate()},onDialogComfirm:function(){this.updateItem({customer_number:this.item.customer_number,comment:this.item.comment})}},mounted:function(){this.fetchList()}},s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-tongji-loan"},[n("div",{staticClass:"search",staticStyle:{margin:"15px 0",width:"300px",display:"inline-block"}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入搜索内容"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[n("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[n("el-option",{attrs:{label:"姓名",value:"name"}}),t._v(" "),n("el-option",{attrs:{label:"编号",value:"customer_number"}}),t._v(" "),n("el-option",{attrs:{label:"手机",value:"phone"}})],1),t._v(" "),n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleSearch},slot:"append"})],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.rows_inShow,stripe:""}},[t._l(t.cols,function(t){return n("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,formatter:t.formatter,width:t.width}})}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){n.preventDefault(),t.onEditEvent(e.$index)}}},[t._v("\n          编辑\n        ")])]}}])})],2),t._v(" "),n("el-pagination",{staticStyle:{margin:"20px 0","text-align":"center"},attrs:{background:"","page-size":t.page_size,total:t.total,layout:"prev, pager, next","current-page":t.page},on:{"current-change":t.handlePageChange}}),t._v(" "),n("el-dialog",{staticClass:"m-tongji-loan-dialog",attrs:{"append-to-body":"",title:"编辑客户信息",visible:t.showEditDialog},on:{"update:visible":function(e){t.showEditDialog=e}}},[n("el-form",{ref:"itemForm",attrs:{model:t.item,"label-position":"right","label-width":"120px"}},[n("el-form-item",{attrs:{label:"客户编号："}},[n("span",[t._v(t._s(this.item.customer_number))])]),t._v(" "),n("el-form-item",{attrs:{label:"姓名："}},[n("span",[t._v(t._s(this.item.customer_name))])]),t._v(" "),n("el-form-item",{attrs:{label:"公司："}},[n("span",[t._v(t._s(this.item.company))])]),t._v(" "),n("el-form-item",{attrs:{label:"业务员："}},[n("span",[t._v(t._s(this.item.user_name))])]),t._v(" "),n("el-form-item",{attrs:{label:"合同编号："}},[n("span",[t._v(t._s(this.item.contract_number))])]),t._v(" "),n("el-form-item",{attrs:{label:"借款金额："}},[n("span",[t._v(t._s(t._f("currencyDisplay")(this.item.loan_money)))])]),t._v(" "),n("el-form-item",{attrs:{label:"手续费："}},[n("span",[t._v(t._s(t._f("currencyDisplay")(this.item.procedure_fee)))])]),t._v(" "),n("el-form-item",{attrs:{label:"登记费："}},[n("span",[t._v(t._s(t._f("currencyDisplay")(this.item.mortgage_registration)))])]),t._v(" "),n("el-form-item",{attrs:{label:"其他费用："}},[n("span",[t._v(t._s(t._f("currencyDisplay")(this.item.other_fee)))])]),t._v(" "),n("el-form-item",{attrs:{label:"收款（本金）："}},[n("span",[t._v(t._s(t._f("currencyDisplay")(this.item.money)))])]),t._v(" "),n("el-form-item",{attrs:{label:"收款（利息）："}},[n("span",[t._v(t._s(t._f("currencyDisplay")(this.item.Interest)))])]),t._v(" "),n("el-form-item",{attrs:{label:"收款（其他）："}},[n("span",[t._v(t._s(t._f("currencyDisplay")(this.item.other_money)))])]),t._v(" "),n("el-form-item",{attrs:{label:"余额："}},[n("span",[t._v(t._s(t._f("currencyDisplay")(this.item.balance)))])]),t._v(" "),n("el-form-item",{attrs:{label:"毛利率："}},[n("span",[t._v(t._s(this.item.benfit_rate))])]),t._v(" "),n("el-form-item",{attrs:{label:"备注："}},[n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容","auto-complete":"off"},model:{value:t.item.comment,callback:function(e){t.$set(t.item,"comment",e)},expression:"item.comment"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.showEditDialog=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.onDialogComfirm}},[t._v("确 定")])],1)],1)],1)},l=[],c={render:s,staticRenderFns:l},m=c,p=n("VU/8"),u=a,d=p(r,m,!1,u,null,null);e.default=d.exports}});
//# sourceMappingURL=9.46097ecbbce91a10762d.js.map