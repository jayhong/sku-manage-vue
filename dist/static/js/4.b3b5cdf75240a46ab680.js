webpackJsonp([4],{ieAk:function(e,t,n){"use strict";function i(e){n("zpWK")}function a(e){n("yFeK")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("4650"),s={props:["target"],data:function(){return{visible:!0,item:{score_card:{}},rules:{customer_name:[{type:"string",required:!0,message:"请填写收款人(借款人)姓名"}],bank_number:[{type:"string",required:!0,message:"请填写收款人银行卡账户"}],bank_name:[{type:"string",required:!0,message:"请填写收款人银行卡名"}],money_type:[{type:"string",required:!0,message:"请填写币别"}],lean_type:[{type:"string",required:!0,message:"请填写支付方式"}],money:[{type:"number",required:!0,message:"请填写收款(借款)金额",trigger:"blur"}],date:[{type:"string",required:!0,message:"请填写日期",trigger:"change"}]},products:[{name:"产品1",id:"1"},{name:"产品2",id:"2"}],types:[{name:"类型1",id:"1"},{name:"类型2",id:"2"}]}},computed:{info:function(){return this.item.wind_control}},methods:{onCheckEvent:function(){this.$emit("detail")},closeEvent:function(){var e=this;this.visible=!1,setTimeout(function(){e.$emit("close")},500)},handleUploadSuccess:function(e,t){},onPassEvent:function(){var e=this;this.$refs.itemForm.validate(function(t){t?e.$emit("pass",e.item):e.$message("请正确填写表单！")})},onDownload:function(){var e=sessionStorage.getItem("ts_user_id");window.open("/v1/inspect/"+e+"/finance/file?finance_id="+this.item.finance_id)}},mounted:function(){this.target.finance.finance_id?(this.item=this.target.finance,this.item.bill_id=this.target.bill_info.bill_id,this.item.bill_status=5):this.item={bill_id:this.target.bill_info.bill_id,bill_status:5,status:1,opinion:"无",customer_name:this.target.customer.name,bank_number:this.target.customer.bank_card_num,bank_name:this.target.customer.bank,money:0,date:"2018-01-01",money_type:"人民币",lean_type:"银行转账",attachment:[{id:1,fee_descript:"",fee:0,bank_info:""},{id:2,fee_descript:"",fee:0,bank_info:""}]}}},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"m-orderManage-auditDialog",attrs:{visible:e.visible,title:"财务审核","append-to-body":"",width:"900px"},on:{close:e.closeEvent}},[-1===e.target.finance.status?n("el-row",{staticStyle:{padding:"10px 20px",border:"2px red dotted","margin-bottom":"20px"}},[e._v("\n    驳回理由："+e._s(e.target.bill_info.reject)+"\n  ")]):e._e(),e._v(" "),n("div",{staticClass:"detail-title",staticStyle:{"border-bottom":"none"}},[e._v("客户："),n("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"text"},nativeOn:{click:function(t){t.preventDefault(),e.onCheckEvent(t)}}},[e._v(e._s(e.target.customer.name))])],1),e._v(" "),n("el-form",{ref:"itemForm",attrs:{model:e.item,rules:e.rules,"label-position":"right","label-width":"150px"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"收款人(借款人)",prop:"customer_name"}},[n("el-col",{attrs:{span:14}},[n("el-input",{attrs:{"controls-position":"right"},model:{value:e.item.customer_name,callback:function(t){e.$set(e.item,"customer_name",t)},expression:"item.customer_name"}})],1)],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"银行名",prop:"bank_name"}},[n("el-col",{attrs:{span:14}},[n("el-input",{attrs:{"controls-position":"right"},model:{value:e.item.bank_name,callback:function(t){e.$set(e.item,"bank_name",t)},expression:"item.bank_name"}})],1)],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"收款人银行卡账户",prop:"bank_number"}},[n("el-col",{attrs:{span:14}},[n("el-input",{attrs:{"controls-position":"right"},model:{value:e.item.bank_number,callback:function(t){e.$set(e.item,"bank_number",t)},expression:"item.bank_number"}})],1)],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"币别",prop:"money_type"}},[n("el-col",{attrs:{span:14}},[n("el-input",{attrs:{"controls-position":"right"},model:{value:e.item.money_type,callback:function(t){e.$set(e.item,"money_type",t)},expression:"item.money_type"}})],1)],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"收款(借款)金额",prop:"money"}},[n("el-col",{attrs:{span:14}},[n("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.item.money,callback:function(t){e.$set(e.item,"money",t)},expression:"item.money"}})],1)],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"日期",required:""}},[n("el-col",{attrs:{span:14}},[n("el-form-item",{attrs:{prop:"date"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.item.date,callback:function(t){e.$set(e.item,"date",t)},expression:"item.date"}})],1)],1)],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"支付方式",prop:"lean_type"}},[n("el-col",{attrs:{span:14}},[n("el-input",{attrs:{"controls-position":"right"},model:{value:e.item.lean_type,callback:function(t){e.$set(e.item,"lean_type",t)},expression:"item.lean_type"}})],1)],1)],1)],1),e._v(" "),n("div",{staticStyle:{border:"1px #ddd solid",margin:"20px",padding:"20px"}},e._l(e.item.attachment,function(t){return n("div",{key:t.id,staticStyle:{border:"1px #ddd dotted",padding:"20px 20px 0 20px","margin-bottom":"10px"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"业务员"}},[n("el-col",{attrs:{span:18}},[n("el-input",{attrs:{"controls-position":"right"},model:{value:t.fee_descript,callback:function(n){e.$set(t,"fee_descript",n)},expression:"attach.fee_descript"}})],1)],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:1==t.id?"手续费（元）":"返点金额（元）"}},[n("el-col",{attrs:{span:14}},[n("el-input-number",{attrs:{"controls-position":"right"},model:{value:t.fee,callback:function(n){e.$set(t,"fee",n)},expression:"attach.fee"}})],1)],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"银行信息"}},[n("el-col",{attrs:{span:22}},[n("el-input",{attrs:{"controls-position":"right"},model:{value:t.bank_info,callback:function(n){e.$set(t,"bank_info",n)},expression:"attach.bank_info"}})],1)],1)],1)],1)],1)})),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{style:{width:"300px"},attrs:{type:"textarea",placeholder:"请输入描述",rows:4},model:{value:e.item.opinion,callback:function(t){e.$set(e.item,"opinion",t)},expression:"item.opinion"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.onPassEvent}},[e._v("通 过")]),e._v(" "),n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")])],1)],1)},l=[],d={render:r,staticRenderFns:l},c=d,m=n("VU/8"),p=i,u=m(s,c,!1,p,"data-v-0100d517",null),g=u.exports,f=n("2Lwn"),_=n("9Q7Z"),b={components:{"audit-dialog":g,"order-table":f.a,"detail-dialog":_.a},data:function(){return{item:{bill_info:{},car:{car_regist:[],drive_license:[],policy:[],evaluation_form:[],key_picture:[],car_picture:[],car_video:[]},customer:{id_card_picture:[],apply_form:[]},finance:{},guarantor:{guarantor_id_card_picture:[]},sign:{},user_info:{},wind_control:{},wind_control_leader:{}},detailDialog:!1,auditDialog:!1}},methods:{getOrderItem:function(e){var t=this,n=sessionStorage.getItem("ts_user_id");return Object(o.a)({url:"/v1/inspect/"+n+"/bill/detail",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"GET",params:e}).then(function(e){t.item=e.data.data}).catch(function(e){t.$message.error(e.response.data.msg)})},onCheckEvent:function(e){var t=this;this.getOrderItem({bill_id:e.bill_id}).then(function(){t.detailDialog=!0})},onAuditEvent:function(e){var t=this;this.getOrderItem({bill_id:e.bill_id}).then(function(){t.auditDialog=!0})},onRejectEvent:function(e){var t=this;this.$prompt("驳回（订单号:"+e.bill_id+"）的理由","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"textarea",inputPattern:/\S/,inputErrorMessage:"请输入驳回理由"}).then(function(n){var i=n.value,a=sessionStorage.getItem("ts_user_id");return Object(o.a)({url:"/v1/inspect/"+a+"/finance",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:{bill_id:e.bill_id,reject:i,bill_status:3,status:-1}}).then(function(e){t.$message({message:"驳回成功！",type:"success"}),t.$refs.table.reloadList()})}).catch(function(){})},showDetailInAudit:function(){this.detailDialog=!0},onPass:function(e){var t=this;e.status=1;var n=sessionStorage.getItem("ts_user_id");return Object(o.a)({url:"/v1/inspect/"+n+"/finance",headers:{"X-Inspect-Token":sessionStorage.getItem("ts_userToken")},method:"POST",data:e}).then(function(n){t.$message({message:"审核通过成功！",type:"success"});var i=sessionStorage.getItem("ts_user_id");window.open("/v1/inspect/"+i+"/finance/file?finance_id="+e.finance_id),t.auditDialog=!1,t.$refs.table.reloadList()}).catch(function(e){t.$message.error(e.response.data.msg)})}}},v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-orderManage-windCtrlAudit"},[n("order-table",{ref:"table",attrs:{stage:"4"},on:{detail:e.onCheckEvent,audit:e.onAuditEvent,reject:e.onRejectEvent}}),e._v(" "),e.auditDialog?n("audit-dialog",{attrs:{target:e.item},on:{detail:e.showDetailInAudit,close:function(t){e.auditDialog=!1},pass:e.onPass}}):e._e(),e._v(" "),e.detailDialog?n("detail-dialog",{attrs:{item:e.item,stage:4},on:{close:function(t){e.detailDialog=!1}}}):e._e()],1)},h=[],A={render:v,staticRenderFns:h},y=A,x=n("VU/8"),k=a,C=x(b,y,!1,k,null,null);t.default=C.exports},uW5X:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,"\n.m-orderManage-windCtrlAudit{\n  padding: 20px;\n}\n","",{version:3,sources:["/Users/wilen/wilen/more/Audit/src/modules/orderManage/FDAudit.vue"],names:[],mappings:";AACA;EACE,cAAc;CACf",file:"FDAudit.vue",sourcesContent:["\n.m-orderManage-windCtrlAudit{\n  padding: 20px;\n}\n"],sourceRoot:""}])},yFeK:function(e,t,n){var i=n("uW5X");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("b6677dc8",i,!0)},zWYM:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,"\n.m-orderManage-auditDialog .detail-title[data-v-0100d517] {\n  line-height: 24px;\n  font-size: 16px;\n  color: #2d2f33;\n  border-bottom: 1px #ddd solid;\n  margin-bottom: 10px;\n  padding: 0 30px;\n}\n.m-orderManage-auditDialog .el-form[data-v-0100d517] {\n  padding: 20px;\n}\n.m-orderManage-auditDialog .score_card_panel[data-v-0100d517]{\n  border: 2px #ddd dotted;\n  margin-bottom: 20px;\n}\n.m-orderManage-auditDialog .score_card_panel .title[data-v-0100d517]{\n  padding: 20px;\n  font-size: 16px;\n  font-weight: bold;\n}\n","",{version:3,sources:["/Users/wilen/wilen/more/Audit/src/modules/orderManage/common/auditByFDDialog.vue"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,eAAe;EACf,8BAA8B;EAC9B,oBAAoB;EACpB,gBAAgB;CACjB;AACD;EACE,cAAc;CACf;AACD;EACE,wBAAwB;EACxB,oBAAoB;CACrB;AACD;EACE,cAAc;EACd,gBAAgB;EAChB,kBAAkB;CACnB",file:"auditByFDDialog.vue",sourcesContent:["\n.m-orderManage-auditDialog .detail-title[data-v-0100d517] {\n  line-height: 24px;\n  font-size: 16px;\n  color: #2d2f33;\n  border-bottom: 1px #ddd solid;\n  margin-bottom: 10px;\n  padding: 0 30px;\n}\n.m-orderManage-auditDialog .el-form[data-v-0100d517] {\n  padding: 20px;\n}\n.m-orderManage-auditDialog .score_card_panel[data-v-0100d517]{\n  border: 2px #ddd dotted;\n  margin-bottom: 20px;\n}\n.m-orderManage-auditDialog .score_card_panel .title[data-v-0100d517]{\n  padding: 20px;\n  font-size: 16px;\n  font-weight: bold;\n}\n"],sourceRoot:""}])},zpWK:function(e,t,n){var i=n("zWYM");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("7b54330c",i,!0)}});
//# sourceMappingURL=4.b3b5cdf75240a46ab680.js.map