{"version":3,"sources":["webpack:///static/js/17.7587a375a3f6aa148134.js","webpack:///./src/modules/authsManage/companiesManage.vue","webpack:///src/modules/authsManage/companiesManage.vue","webpack:///./src/modules/authsManage/companiesManage.vue?a3d4","webpack:///./src/modules/authsManage/companiesManage.vue?3247","webpack:///./src/modules/authsManage/companiesManage.vue?ae9f"],"names":["webpackJsonp","8QeX","module","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","request","companiesManage","data","cols","prop","label","rows","item","rules","company_name","required","message","trigger","loading","showEditDialog","isEdit","methods","fetchList","_this","this","uid","sessionStorage","getItem","url","headers","X-Inspect-Token","method","then","res","catch","$message","error","response","msg","addItem","_this2","type","updateItem","_this3","deleteItem","_this4","onAddEvent","$refs","clearValidate","onEditEvent","index","company_id","onDialogComfirm","_this5","validate","valid","onDelEvent","_this6","$confirm","confirmButtonText","cancelButtonText","mounted","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","click","_v","directives","name","rawName","expression","staticStyle","width","stripe","_l","col","key","scopedSlots","_u","fn","scope","nativeOn","$event","preventDefault","$index","append-to-body","title","visible","update:visible","ref","model","label-position","label-width","auto-complete","disabled","callback","$$v","$set","_e","slot","staticRenderFns","esExports","authsManage_companiesManage","normalizeComponent","__vue_styles__","Component","D5rc","exports","content","i","locals","uBrP","push","version","sources","names","mappings","file","sourcesContent","sourceRoot"],"mappings":"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","file":"static/js/17.7587a375a3f6aa148134.js","sourcesContent":["webpackJsonp([17],{\n\n/***/ \"8QeX\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./src/common/request.js\nvar request = __webpack_require__(\"4650\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/modules/authsManage/companiesManage.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ var companiesManage = ({\n  data: function data() {\n    return {\n      cols: [{\n        prop: 'company_id',\n        label: 'ID'\n      }, {\n        prop: 'company_name',\n        label: '名称'\n      }],\n      rows: [],\n      item: {},\n      rules: {\n        company_name: [{ required: true, message: '请输入公司名称', trigger: 'blur' }]\n      },\n      loading: true,\n      showEditDialog: false,\n      isEdit: false\n    };\n  },\n\n  methods: {\n    fetchList: function fetchList() {\n      var _this = this;\n\n      var uid = sessionStorage.getItem('ts_user_id');\n      return Object(request[\"a\" /* rest */])({\n        url: '/v1/inspect/' + uid + '/company',\n        headers: {\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'GET'\n      }).then(function (res) {\n        _this.rows = res.data;\n        _this.loading = false;\n      }).catch(function (res) {\n        _this.$message.error(res.response.data.msg);\n      });\n    },\n    addItem: function addItem(data) {\n      var _this2 = this;\n\n      var uid = sessionStorage.getItem('ts_user_id');\n      return Object(request[\"a\" /* rest */])({\n        url: '/v1/inspect/' + uid + '/company/add',\n        headers: {\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'POST',\n        data: data\n      }).then(function (res) {\n        _this2.$message({\n          message: '新增公司成功，请在列表中查看！',\n          type: 'success'\n        });\n      }).catch(function (res) {\n        _this2.$message.error(res.response.data.msg);\n      });\n    },\n    updateItem: function updateItem(data) {\n      var _this3 = this;\n\n      var uid = sessionStorage.getItem('ts_user_id');\n      return Object(request[\"a\" /* rest */])({\n        url: '/v1/inspect/' + uid + '/company/update',\n        headers: {\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'POST',\n        data: data\n      }).then(function (res) {\n        _this3.$message({\n          message: '编辑公司成功，请在列表中查看！',\n          type: 'success'\n        });\n      }).catch(function (res) {\n        _this3.$message.error(res.response.data.msg);\n      });\n    },\n    deleteItem: function deleteItem(data) {\n      var _this4 = this;\n\n      var uid = sessionStorage.getItem('ts_user_id');\n      return Object(request[\"a\" /* rest */])({\n        url: '/v1/inspect/' + uid + '/company/del',\n        headers: {\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'POST',\n        data: data\n      }).then(function (res) {\n        _this4.$message({\n          message: '删除公司成功，请在列表中查看！',\n          type: 'success'\n        });\n      }).catch(function (res) {\n        _this4.$message.error(res.response.data.msg);\n      });\n    },\n    onAddEvent: function onAddEvent() {\n      this.item = {\n        company_name: ''\n      };\n      this.isEdit = false;\n      this.showEditDialog = true;\n      this.$refs['itemForm'] ? this.$refs['itemForm'].clearValidate() : null;\n    },\n    onEditEvent: function onEditEvent(index) {\n      this.item = {\n        index: index,\n        company_id: this.rows[index].company_id,\n        company_name: this.rows[index].company_name\n      };\n      this.isEdit = true;\n      this.showEditDialog = true;\n      this.$refs['itemForm'] ? this.$refs['itemForm'].clearValidate() : null;\n    },\n    onDialogComfirm: function onDialogComfirm() {\n      var _this5 = this;\n\n      this.$refs['itemForm'].validate(function (valid) {\n        if (valid) {\n          if (_this5.isEdit) {\n            if (_this5.item.company_name === _this5.rows[_this5.item.index].company_name) {\n              _this5.$message('无任何修改！');\n              return false;\n            }\n            _this5.updateItem({\n              company_id: _this5.item.company_id,\n              company_name: _this5.item.company_name\n            }).then(function (res) {\n              _this5.showEditDialog = false;\n              _this5.fetchList();\n            });\n          } else {\n            _this5.addItem(_this5.item).then(function (res) {\n              _this5.showEditDialog = false;\n              _this5.fetchList();\n            });\n          }\n        } else {\n          return false;\n        }\n      });\n    },\n    onDelEvent: function onDelEvent(index) {\n      var _this6 = this;\n\n      this.$confirm('本次操作将永久删除该公司, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this6.deleteItem({ company_id: _this6.rows[index].company_id }).then(function (res) {\n          _this6.fetchList();\n        });\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.fetchList();\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-43b2ee06\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/modules/authsManage/companiesManage.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-authsManage-companiesManage\"},[_c('div',{staticClass:\"m-authsManage-companiesManage-header\"},[_c('el-button',{staticClass:\"add_btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onAddEvent}},[_vm._v(\"新增公司\")])],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.rows,\"stripe\":\"\"}},[_vm._l((_vm.cols),function(col){return _c('el-table-column',{key:col.prop,attrs:{\"prop\":col.prop,\"label\":col.label,\"width\":col.width}})}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.onEditEvent(scope.$index)}}},[_vm._v(\"\\n          编辑\\n        \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.onDelEvent(scope.$index)}}},[_vm._v(\"\\n          删除\\n        \")])]}}])})],2),_vm._v(\" \"),_c('el-dialog',{staticClass:\"m-authsManage-companiesManage-dialog\",attrs:{\"append-to-body\":\"\",\"title\":_vm.isEdit?'编辑公司':'新增公司',\"visible\":_vm.showEditDialog},on:{\"update:visible\":function($event){_vm.showEditDialog=$event}}},[_c('el-form',{ref:\"itemForm\",attrs:{\"model\":_vm.item,\"rules\":_vm.rules,\"label-position\":\"right\",\"label-width\":\"80px\"}},[(_vm.isEdit)?_c('el-form-item',{attrs:{\"label\":\"ID\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\",\"disabled\":\"\"},model:{value:(_vm.item.company_id),callback:function ($$v) {_vm.$set(_vm.item, \"company_id\", $$v)},expression:\"item.company_id\"}})],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"company_name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.item.company_name),callback:function ($$v) {_vm.$set(_vm.item, \"company_name\", $$v)},expression:\"item.company_name\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showEditDialog = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onDialogComfirm}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var authsManage_companiesManage = (esExports);\n// CONCATENATED MODULE: ./src/modules/authsManage/companiesManage.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"D5rc\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  companiesManage,\n  authsManage_companiesManage,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var modules_authsManage_companiesManage = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"D5rc\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"uBrP\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"rjj0\")(\"b8a7ada2\", content, true);\n\n/***/ }),\n\n/***/ \"uBrP\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"FZ+f\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\\n.m-authsManage-companiesManage-header{\\n  margin-bottom: 20px;\\n}\\n.m-authsManage-companiesManage-dialog .el-input {\\n  width: 300px;\\n}\\n.m-authsManage-companiesManage-dialog .el-form {\\n  padding: 20px;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"/Users/wilen/wilen/more/Audit/src/modules/authsManage/companiesManage.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,oBAAoB;CACrB;AACD;EACE,aAAa;CACd;AACD;EACE,cAAc;CACf\",\"file\":\"companiesManage.vue\",\"sourcesContent\":[\"\\n.m-authsManage-companiesManage-header{\\n  margin-bottom: 20px;\\n}\\n.m-authsManage-companiesManage-dialog .el-input {\\n  width: 300px;\\n}\\n.m-authsManage-companiesManage-dialog .el-form {\\n  padding: 20px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/17.7587a375a3f6aa148134.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-43b2ee06\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./companiesManage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./companiesManage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-43b2ee06\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./companiesManage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modules/authsManage/companiesManage.vue\n// module id = null\n// module chunks = ","<style>\n  .m-authsManage-companiesManage-header{\n    margin-bottom: 20px;\n  }\n  .m-authsManage-companiesManage-dialog .el-input {\n    width: 300px;\n  }\n  .m-authsManage-companiesManage-dialog .el-form {\n    padding: 20px;\n  }\n</style>\n<template>\n  <div class=\"m-authsManage-companiesManage\">\n    <div class=\"m-authsManage-companiesManage-header\">\n      <el-button class=\"add_btn\" type=\"primary\" @click=\"onAddEvent\">新增公司</el-button>\n    </div>\n    <el-table\n      v-loading=\"loading\"\n      :data=\"rows\"\n      stripe\n      style=\"width: 100%\">\n      <el-table-column\n        v-for=\"col in cols\"\n        :key=\"col.prop\"\n        :prop=\"col.prop\"\n        :label=\"col.label\"\n        :width=\"col.width\">\n      </el-table-column>\n      <el-table-column\n        label=\"操作\"\n        width=\"200\">\n        <template slot-scope=\"scope\">\n          <el-button\n            @click.native.prevent=\"onEditEvent(scope.$index)\"\n            type=\"text\">\n            编辑\n          </el-button>\n          <el-button\n            @click.native.prevent=\"onDelEvent(scope.$index)\"\n            type=\"text\">\n            删除\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog class=\"m-authsManage-companiesManage-dialog\" append-to-body :title=\"isEdit?'编辑公司':'新增公司'\" :visible.sync=\"showEditDialog\">\n      <el-form :model=\"item\" :rules=\"rules\" ref=\"itemForm\" label-position=\"right\" label-width=\"80px\">\n        <el-form-item v-if=\"isEdit\" label=\"ID\">\n          <el-input v-model=\"item.company_id\" auto-complete=\"off\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"名称\" prop=\"company_name\">\n          <el-input v-model=\"item.company_name\" auto-complete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"showEditDialog = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"onDialogComfirm\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { rest } from '@/common/request';\n\nexport default {\n  data(){\n    return {\n      cols:[\n        {\n          prop: 'company_id',\n          label: 'ID'\n        },{\n          prop: 'company_name',\n          label: '名称'\n        }\n      ],\n      rows: [],\n      item: {},\n      rules: {\n        company_name:[\n          {required: true, message: '请输入公司名称', trigger: 'blur'}\n        ]\n      },\n      loading: true,\n      showEditDialog: false,\n      isEdit: false\n    }\n  },\n  methods:{\n    fetchList(){\n      let uid = sessionStorage.getItem('ts_user_id');\n      return rest({\n        url: '/v1/inspect/'+ uid +'/company',\n        headers:{\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'GET'\n      }).then(res => {\n        this.rows = res.data;\n        this.loading = false;\n      }).catch(res => {\n        this.$message.error(res.response.data.msg);\n      });\n    },\n    addItem(data){\n      let uid = sessionStorage.getItem('ts_user_id');\n      return rest({\n        url: '/v1/inspect/'+ uid +'/company/add',\n        headers:{\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'POST',\n        data: data\n      }).then(res => {\n        this.$message({\n          message: '新增公司成功，请在列表中查看！',\n          type: 'success'\n        });\n      }).catch(res => {\n        this.$message.error(res.response.data.msg);\n      })\n    },\n    updateItem(data){\n      let uid = sessionStorage.getItem('ts_user_id');\n      return rest({\n        url: '/v1/inspect/'+ uid +'/company/update',\n        headers:{\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'POST',\n        data: data\n      }).then(res => {\n        this.$message({\n          message: '编辑公司成功，请在列表中查看！',\n          type: 'success'\n        });\n      }).catch(res => {\n        this.$message.error(res.response.data.msg);\n      })\n    },\n    deleteItem(data){\n      let uid = sessionStorage.getItem('ts_user_id');\n      return rest({\n        url: '/v1/inspect/'+ uid +'/company/del',\n        headers:{\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'POST',\n        data: data\n      }).then(res => {\n        this.$message({\n          message: '删除公司成功，请在列表中查看！',\n          type: 'success'\n        });\n      }).catch(res => {\n        this.$message.error(res.response.data.msg);\n      })\n    },\n    onAddEvent(){\n      this.item = {\n        company_name: ''\n      };\n      this.isEdit = false;\n      this.showEditDialog = true;\n      this.$refs['itemForm']?this.$refs['itemForm'].clearValidate():null;\n    },\n    onEditEvent(index){\n      this.item = {\n        index: index,\n        company_id: this.rows[index].company_id,\n        company_name: this.rows[index].company_name\n      };\n      this.isEdit = true;\n      this.showEditDialog = true;\n      this.$refs['itemForm']?this.$refs['itemForm'].clearValidate():null;\n    },\n    onDialogComfirm(){\n      this.$refs['itemForm'].validate((valid) => {\n        if(valid){\n          if(this.isEdit){\n            if(this.item.company_name === this.rows[this.item.index].company_name){\n              this.$message('无任何修改！')\n              return false;\n            }\n            this.updateItem({\n              company_id: this.item.company_id,\n              company_name: this.item.company_name\n            }).then(res => {\n              this.showEditDialog = false;\n              this.fetchList();\n            })\n          }else{\n            this.addItem(this.item).then(res => {\n              this.showEditDialog = false;\n              this.fetchList();\n            });\n          }\n        }else{\n          return false;\n        }\n      });\n    },\n    onDelEvent(index){\n      this.$confirm('本次操作将永久删除该公司, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteItem({company_id: this.rows[index].company_id}).then(res => {\n          this.fetchList();\n        });\n      })\n    }\n  },\n  mounted(){\n    this.fetchList();\n  }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/modules/authsManage/companiesManage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-authsManage-companiesManage\"},[_c('div',{staticClass:\"m-authsManage-companiesManage-header\"},[_c('el-button',{staticClass:\"add_btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onAddEvent}},[_vm._v(\"新增公司\")])],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.rows,\"stripe\":\"\"}},[_vm._l((_vm.cols),function(col){return _c('el-table-column',{key:col.prop,attrs:{\"prop\":col.prop,\"label\":col.label,\"width\":col.width}})}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.onEditEvent(scope.$index)}}},[_vm._v(\"\\n          编辑\\n        \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.onDelEvent(scope.$index)}}},[_vm._v(\"\\n          删除\\n        \")])]}}])})],2),_vm._v(\" \"),_c('el-dialog',{staticClass:\"m-authsManage-companiesManage-dialog\",attrs:{\"append-to-body\":\"\",\"title\":_vm.isEdit?'编辑公司':'新增公司',\"visible\":_vm.showEditDialog},on:{\"update:visible\":function($event){_vm.showEditDialog=$event}}},[_c('el-form',{ref:\"itemForm\",attrs:{\"model\":_vm.item,\"rules\":_vm.rules,\"label-position\":\"right\",\"label-width\":\"80px\"}},[(_vm.isEdit)?_c('el-form-item',{attrs:{\"label\":\"ID\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\",\"disabled\":\"\"},model:{value:(_vm.item.company_id),callback:function ($$v) {_vm.$set(_vm.item, \"company_id\", $$v)},expression:\"item.company_id\"}})],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"company_name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.item.company_name),callback:function ($$v) {_vm.$set(_vm.item, \"company_name\", $$v)},expression:\"item.company_name\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showEditDialog = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onDialogComfirm}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-43b2ee06\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/modules/authsManage/companiesManage.vue\n// module id = null\n// module chunks = ","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-43b2ee06\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./companiesManage.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"b8a7ada2\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-43b2ee06\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/modules/authsManage/companiesManage.vue\n// module id = D5rc\n// module chunks = 17","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.m-authsManage-companiesManage-header{\\n  margin-bottom: 20px;\\n}\\n.m-authsManage-companiesManage-dialog .el-input {\\n  width: 300px;\\n}\\n.m-authsManage-companiesManage-dialog .el-form {\\n  padding: 20px;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"/Users/wilen/wilen/more/Audit/src/modules/authsManage/companiesManage.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,oBAAoB;CACrB;AACD;EACE,aAAa;CACd;AACD;EACE,cAAc;CACf\",\"file\":\"companiesManage.vue\",\"sourcesContent\":[\"\\n.m-authsManage-companiesManage-header{\\n  margin-bottom: 20px;\\n}\\n.m-authsManage-companiesManage-dialog .el-input {\\n  width: 300px;\\n}\\n.m-authsManage-companiesManage-dialog .el-form {\\n  padding: 20px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-43b2ee06\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/modules/authsManage/companiesManage.vue\n// module id = uBrP\n// module chunks = 17"],"sourceRoot":""}