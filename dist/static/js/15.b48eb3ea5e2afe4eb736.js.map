{"version":3,"sources":["webpack:///static/js/15.b48eb3ea5e2afe4eb736.js","webpack:///./src/modules/authsManage/groupsManage.vue?06db","webpack:///./src/modules/authsManage/groupsManage.vue?069b","webpack:///./src/modules/authsManage/groupsManage.vue","webpack:///src/modules/authsManage/groupsManage.vue","webpack:///./src/modules/authsManage/groupsManage.vue?c9f1"],"names":["webpackJsonp","+L1C","module","exports","__webpack_require__","push","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","Ho3e","content","locals","eRWB","__webpack_exports__","injectStyle","ssrContext","Object","defineProperty","value","request","groupsManage","data","dict","cols","prop","label","width","rows","item","rules","group_name","required","message","trigger","company_id","type","loading","showEditDialog","isEdit","methods","fetchDict","_this","this","uid","sessionStorage","getItem","url","headers","X-Inspect-Token","method","then","res","catch","$message","error","response","msg","fetchList","_this2","addItem","_this3","updateItem","_this4","deleteItem","_this5","onAddEvent","$refs","clearValidate","onEditEvent","index","group_id","onDialogComfirm","_this6","validate","valid","onDelEvent","_this7","$confirm","confirmButtonText","cancelButtonText","mounted","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","click","_v","directives","name","rawName","expression","staticStyle","stripe","_l","col","key","scopedSlots","_u","fn","scope","nativeOn","$event","preventDefault","$index","append-to-body","title","visible","update:visible","ref","model","label-position","label-width","auto-complete","disabled","callback","$$v","$set","_e","placeholder","company","company_name","slot","staticRenderFns","esExports","authsManage_groupsManage","normalizeComponent","__vue_styles__","Component"],"mappings":"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","file":"static/js/15.b48eb3ea5e2afe4eb736.js","sourcesContent":["webpackJsonp([15],{\n\n/***/ \"+L1C\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"FZ+f\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\\n.m-authsManage-groupsManage-header{\\n  margin-bottom: 20px;\\n}\\n.m-authsManage-groupsManage-dialog .el-input {\\n  width: 300px;\\n}\\n.m-authsManage-groupsManage-dialog .el-form {\\n  padding: 20px;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"/Users/wilen/wilen/more/Audit/src/modules/authsManage/groupsManage.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,oBAAoB;CACrB;AACD;EACE,aAAa;CACd;AACD;EACE,cAAc;CACf\",\"file\":\"groupsManage.vue\",\"sourcesContent\":[\"\\n.m-authsManage-groupsManage-header{\\n  margin-bottom: 20px;\\n}\\n.m-authsManage-groupsManage-dialog .el-input {\\n  width: 300px;\\n}\\n.m-authsManage-groupsManage-dialog .el-form {\\n  padding: 20px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"Ho3e\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"+L1C\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"rjj0\")(\"f79afae0\", content, true);\n\n/***/ }),\n\n/***/ \"eRWB\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./src/common/request.js\nvar request = __webpack_require__(\"4650\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/modules/authsManage/groupsManage.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ var groupsManage = ({\n  data: function data() {\n    return {\n      dict: {},\n      cols: [{\n        prop: 'group_id',\n        label: 'ID',\n        width: 80\n      }, {\n        prop: 'group_name',\n        label: '名称'\n      }, {\n        prop: 'company_name',\n        label: '所属公司'\n      }],\n      rows: [],\n      item: {},\n      rules: {\n        group_name: [{ required: true, message: '请输入分组名称', trigger: 'blur' }],\n        company_id: [{ type: 'number', required: true, message: '请选择所属公司', trigger: 'change' }]\n      },\n      loading: true,\n      showEditDialog: false,\n      isEdit: false\n    };\n  },\n\n  methods: {\n    fetchDict: function fetchDict() {\n      var _this = this;\n\n      var uid = sessionStorage.getItem('ts_user_id');\n      var res = Object(request[\"a\" /* rest */])({\n        url: '/v1/inspect/' + uid + '/dict',\n        headers: {\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'GET'\n      }).then(function (res) {\n        _this.dict = res.data;\n      }).catch(function (res) {\n        _this.$message.error(res.response.data.msg);\n      });\n    },\n    fetchList: function fetchList() {\n      var _this2 = this;\n\n      var uid = sessionStorage.getItem('ts_user_id');\n      var res = Object(request[\"a\" /* rest */])({\n        url: '/v1/inspect/' + uid + '/group',\n        headers: {\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'GET'\n      }).then(function (res) {\n        _this2.rows = res.data;\n        _this2.loading = false;\n      }).catch(function (res) {\n        _this2.$message.error(res.response.data.msg);\n      });\n    },\n    addItem: function addItem(data) {\n      var _this3 = this;\n\n      var uid = sessionStorage.getItem('ts_user_id');\n      return Object(request[\"a\" /* rest */])({\n        url: '/v1/inspect/' + uid + '/group/add',\n        headers: {\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'POST',\n        data: data\n      }).then(function (res) {\n        _this3.$message({\n          message: '新增分组成功，请在列表中查看！',\n          type: 'success'\n        });\n      }).catch(function (res) {\n        _this3.$message.error(res.response.data.msg);\n      });\n    },\n    updateItem: function updateItem(data) {\n      var _this4 = this;\n\n      var uid = sessionStorage.getItem('ts_user_id');\n      return Object(request[\"a\" /* rest */])({\n        url: '/v1/inspect/' + uid + '/group/update',\n        headers: {\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'POST',\n        data: data\n      }).then(function (res) {\n        _this4.$message({\n          message: '编辑分组成功，请在列表中查看！',\n          type: 'success'\n        });\n      }).catch(function (res) {\n        _this4.$message.error(res.response.data.msg);\n      });\n    },\n    deleteItem: function deleteItem(data) {\n      var _this5 = this;\n\n      var uid = sessionStorage.getItem('ts_user_id');\n      return Object(request[\"a\" /* rest */])({\n        url: '/v1/inspect/' + uid + '/group/del',\n        headers: {\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'POST',\n        data: data\n      }).then(function (res) {\n        _this5.$message({\n          message: '删除分组成功，请在列表中查看！',\n          type: 'success'\n        });\n      }).catch(function (res) {\n        _this5.$message.error(res.response.data.msg);\n      });\n    },\n    onAddEvent: function onAddEvent() {\n      this.item = {\n        group_name: '',\n        company_id: null\n      };\n      this.isEdit = false;\n      this.showEditDialog = true;\n      this.$refs['itemForm'] ? this.$refs['itemForm'].clearValidate() : null;\n    },\n    onEditEvent: function onEditEvent(index) {\n      this.item = {\n        index: index,\n        group_id: this.rows[index].group_id,\n        group_name: this.rows[index].group_name,\n        company_id: this.rows[index].company_id\n      };\n      this.isEdit = true;\n      this.showEditDialog = true;\n      this.$refs['itemForm'] ? this.$refs['itemForm'].clearValidate() : null;\n    },\n    onDialogComfirm: function onDialogComfirm() {\n      var _this6 = this;\n\n      this.$refs['itemForm'].validate(function (valid) {\n        if (valid) {\n          if (_this6.isEdit) {\n            if (_this6.item.group_name === _this6.rows[_this6.item.index].group_name && _this6.item.company_id === _this6.rows[_this6.item.index].company_id) {\n              _this6.$message('无任何修改！');\n              return false;\n            }\n            _this6.updateItem({\n              group_id: _this6.item.group_id,\n              group_name: _this6.item.group_name,\n              company_id: _this6.item.company_id\n            }).then(function (res) {\n              _this6.showEditDialog = false;\n              _this6.fetchList();\n            });\n          } else {\n            _this6.addItem(_this6.item).then(function (res) {\n              _this6.showEditDialog = false;\n              _this6.fetchList();\n            });\n          }\n        } else {\n          return false;\n        }\n      });\n    },\n    onDelEvent: function onDelEvent(index) {\n      var _this7 = this;\n\n      this.$confirm('本次操作将永久删除该公司, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this7.deleteItem({ group_id: _this7.rows[index].group_id }).then(function (res) {\n          _this7.fetchList();\n        });\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.fetchDict();\n    this.fetchList();\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1ca892a0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/modules/authsManage/groupsManage.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-authsManage-groupsManage\"},[_c('div',{staticClass:\"m-authsManage-groupsManage-header\"},[_c('el-button',{staticClass:\"add_btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onAddEvent}},[_vm._v(\"新增部门\")])],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.rows,\"stripe\":\"\"}},[_vm._l((_vm.cols),function(col){return _c('el-table-column',{key:col.prop,attrs:{\"prop\":col.prop,\"label\":col.label,\"width\":col.width}})}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.onEditEvent(scope.$index)}}},[_vm._v(\"\\n          编辑\\n        \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.onDelEvent(scope.$index)}}},[_vm._v(\"\\n          删除\\n        \")])]}}])})],2),_vm._v(\" \"),_c('el-dialog',{staticClass:\"m-authsManage-groupsManage-dialog\",attrs:{\"append-to-body\":\"\",\"title\":_vm.isEdit?'编辑分组':'新增分组',\"visible\":_vm.showEditDialog},on:{\"update:visible\":function($event){_vm.showEditDialog=$event}}},[_c('el-form',{ref:\"itemForm\",attrs:{\"model\":_vm.item,\"rules\":_vm.rules,\"label-position\":\"right\",\"label-width\":\"80px\"}},[(_vm.isEdit)?_c('el-form-item',{attrs:{\"label\":\"ID\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\",\"disabled\":\"\"},model:{value:(_vm.item.group_id),callback:function ($$v) {_vm.$set(_vm.item, \"group_id\", $$v)},expression:\"item.group_id\"}})],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"group_name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.item.group_name),callback:function ($$v) {_vm.$set(_vm.item, \"group_name\", $$v)},expression:\"item.group_name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"所属公司\",\"prop\":\"company_id\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.item.company_id),callback:function ($$v) {_vm.$set(_vm.item, \"company_id\", $$v)},expression:\"item.company_id\"}},_vm._l((_vm.dict.company),function(company){return _c('el-option',{key:company.company_id,attrs:{\"label\":company.company_name,\"value\":company.company_id}})}))],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showEditDialog = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onDialogComfirm}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var authsManage_groupsManage = (esExports);\n// CONCATENATED MODULE: ./src/modules/authsManage/groupsManage.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"Ho3e\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  groupsManage,\n  authsManage_groupsManage,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var modules_authsManage_groupsManage = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/15.b48eb3ea5e2afe4eb736.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.m-authsManage-groupsManage-header{\\n  margin-bottom: 20px;\\n}\\n.m-authsManage-groupsManage-dialog .el-input {\\n  width: 300px;\\n}\\n.m-authsManage-groupsManage-dialog .el-form {\\n  padding: 20px;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"/Users/wilen/wilen/more/Audit/src/modules/authsManage/groupsManage.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,oBAAoB;CACrB;AACD;EACE,aAAa;CACd;AACD;EACE,cAAc;CACf\",\"file\":\"groupsManage.vue\",\"sourcesContent\":[\"\\n.m-authsManage-groupsManage-header{\\n  margin-bottom: 20px;\\n}\\n.m-authsManage-groupsManage-dialog .el-input {\\n  width: 300px;\\n}\\n.m-authsManage-groupsManage-dialog .el-form {\\n  padding: 20px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-1ca892a0\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/modules/authsManage/groupsManage.vue\n// module id = +L1C\n// module chunks = 15","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1ca892a0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./groupsManage.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"f79afae0\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-1ca892a0\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/modules/authsManage/groupsManage.vue\n// module id = Ho3e\n// module chunks = 15","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1ca892a0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./groupsManage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./groupsManage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1ca892a0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./groupsManage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modules/authsManage/groupsManage.vue\n// module id = null\n// module chunks = ","<style>\n  .m-authsManage-groupsManage-header{\n    margin-bottom: 20px;\n  }\n  .m-authsManage-groupsManage-dialog .el-input {\n    width: 300px;\n  }\n  .m-authsManage-groupsManage-dialog .el-form {\n    padding: 20px;\n  }\n</style>\n<template>\n  <div class=\"m-authsManage-groupsManage\">\n    <div class=\"m-authsManage-groupsManage-header\">\n      <el-button class=\"add_btn\" type=\"primary\" @click=\"onAddEvent\">新增部门</el-button>\n    </div>\n    <el-table\n      v-loading=\"loading\"\n      :data=\"rows\"\n      stripe\n      style=\"width: 100%\">\n      <el-table-column\n        v-for=\"col in cols\"\n        :key=\"col.prop\"\n        :prop=\"col.prop\"\n        :label=\"col.label\"\n        :width=\"col.width\">\n      </el-table-column>\n      <el-table-column\n        label=\"操作\"\n        width=\"200\">\n        <template slot-scope=\"scope\">\n          <el-button\n            @click.native.prevent=\"onEditEvent(scope.$index)\"\n            type=\"text\">\n            编辑\n          </el-button>\n          <el-button\n            @click.native.prevent=\"onDelEvent(scope.$index)\"\n            type=\"text\">\n            删除\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog class=\"m-authsManage-groupsManage-dialog\" append-to-body :title=\"isEdit?'编辑分组':'新增分组'\" :visible.sync=\"showEditDialog\">\n      <el-form :model=\"item\" :rules=\"rules\" ref=\"itemForm\" label-position=\"right\" label-width=\"80px\">\n        <el-form-item v-if=\"isEdit\" label=\"ID\">\n          <el-input v-model=\"item.group_id\" auto-complete=\"off\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"名称\" prop=\"group_name\">\n          <el-input v-model=\"item.group_name\" auto-complete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"所属公司\" prop=\"company_id\">\n          <el-select v-model=\"item.company_id\" placeholder=\"请选择\">\n            <el-option v-for=\"company in dict.company\" :key=\"company.company_id\" :label=\"company.company_name\" :value=\"company.company_id\"></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"showEditDialog = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"onDialogComfirm\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { rest } from '@/common/request';\n\nexport default {\n  data(){\n    return {\n      dict:{},\n      cols:[\n        {\n          prop: 'group_id',\n          label: 'ID',\n          width: 80\n        },{\n          prop: 'group_name',\n          label: '名称'\n        },{\n          prop: 'company_name',\n          label: '所属公司'\n        }\n      ],\n      rows: [],\n      item: {},\n      rules: {\n        group_name:[\n          {required: true, message: '请输入分组名称', trigger: 'blur'}\n        ],\n        company_id:[\n          {type: 'number', required: true, message: '请选择所属公司', trigger: 'change'}\n        ]\n      },\n      loading: true,\n      showEditDialog: false,\n      isEdit: false\n    }\n  },\n  methods:{\n    fetchDict(){\n      let uid = sessionStorage.getItem('ts_user_id');\n      let res = rest({\n        url: '/v1/inspect/'+ uid +'/dict',\n        headers:{\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'GET'\n      }).then(res => {\n        this.dict = res.data;\n      }).catch(res => {\n        this.$message.error(res.response.data.msg);\n      })\n    },\n    fetchList(){\n      let uid = sessionStorage.getItem('ts_user_id');\n      let res = rest({\n        url: '/v1/inspect/'+ uid +'/group',\n        headers:{\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'GET'\n      }).then(res => {\n        this.rows = res.data;\n        this.loading = false;\n      }).catch(res => {\n        this.$message.error(res.response.data.msg);\n      })\n    },\n    addItem(data){\n      let uid = sessionStorage.getItem('ts_user_id');\n      return rest({\n        url: '/v1/inspect/'+ uid +'/group/add',\n        headers:{\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'POST',\n        data: data\n      }).then(res => {\n        this.$message({\n          message: '新增分组成功，请在列表中查看！',\n          type: 'success'\n        });\n      }).catch(res => {\n        this.$message.error(res.response.data.msg);\n      })\n    },\n    updateItem(data){\n      let uid = sessionStorage.getItem('ts_user_id');\n      return rest({\n        url: '/v1/inspect/'+ uid +'/group/update',\n        headers:{\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'POST',\n        data: data\n      }).then(res => {\n        this.$message({\n          message: '编辑分组成功，请在列表中查看！',\n          type: 'success'\n        });\n      }).catch(res => {\n        this.$message.error(res.response.data.msg);\n      })\n    },\n    deleteItem(data){\n      let uid = sessionStorage.getItem('ts_user_id');\n      return rest({\n        url: '/v1/inspect/'+ uid +'/group/del',\n        headers:{\n          'X-Inspect-Token': sessionStorage.getItem('ts_userToken')\n        },\n        method: 'POST',\n        data: data\n      }).then(res => {\n        this.$message({\n          message: '删除分组成功，请在列表中查看！',\n          type: 'success'\n        });\n      }).catch(res => {\n        this.$message.error(res.response.data.msg);\n      })\n    },\n    onAddEvent(){\n      this.item = {\n        group_name: '',\n        company_id: null\n      };\n      this.isEdit = false;\n      this.showEditDialog = true;\n      this.$refs['itemForm']?this.$refs['itemForm'].clearValidate():null;\n    },\n    onEditEvent(index){\n      this.item = {\n        index: index,\n        group_id: this.rows[index].group_id,\n        group_name: this.rows[index].group_name,\n        company_id: this.rows[index].company_id\n      };\n      this.isEdit = true;\n      this.showEditDialog = true;\n      this.$refs['itemForm']?this.$refs['itemForm'].clearValidate():null;\n    },\n    onDialogComfirm(){\n      this.$refs['itemForm'].validate((valid) => {\n        if(valid){\n          if(this.isEdit){\n            if(this.item.group_name === this.rows[this.item.index].group_name && this.item.company_id === this.rows[this.item.index].company_id){\n              this.$message('无任何修改！')\n              return false;\n            }\n            this.updateItem({\n              group_id: this.item.group_id,\n              group_name: this.item.group_name,\n              company_id: this.item.company_id\n            }).then(res => {\n              this.showEditDialog = false;\n              this.fetchList();\n            })\n          }else{\n            this.addItem(this.item).then(res => {\n              this.showEditDialog = false;\n              this.fetchList();\n            });\n          }\n        }else{\n          return false;\n        }\n      });\n    },\n    onDelEvent(index){\n      this.$confirm('本次操作将永久删除该公司, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteItem({group_id: this.rows[index].group_id}).then(res => {\n          this.fetchList();\n        });\n      })\n    }\n  },\n  mounted(){\n    this.fetchDict();\n    this.fetchList();\n  }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/modules/authsManage/groupsManage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-authsManage-groupsManage\"},[_c('div',{staticClass:\"m-authsManage-groupsManage-header\"},[_c('el-button',{staticClass:\"add_btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onAddEvent}},[_vm._v(\"新增部门\")])],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.rows,\"stripe\":\"\"}},[_vm._l((_vm.cols),function(col){return _c('el-table-column',{key:col.prop,attrs:{\"prop\":col.prop,\"label\":col.label,\"width\":col.width}})}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.onEditEvent(scope.$index)}}},[_vm._v(\"\\n          编辑\\n        \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.onDelEvent(scope.$index)}}},[_vm._v(\"\\n          删除\\n        \")])]}}])})],2),_vm._v(\" \"),_c('el-dialog',{staticClass:\"m-authsManage-groupsManage-dialog\",attrs:{\"append-to-body\":\"\",\"title\":_vm.isEdit?'编辑分组':'新增分组',\"visible\":_vm.showEditDialog},on:{\"update:visible\":function($event){_vm.showEditDialog=$event}}},[_c('el-form',{ref:\"itemForm\",attrs:{\"model\":_vm.item,\"rules\":_vm.rules,\"label-position\":\"right\",\"label-width\":\"80px\"}},[(_vm.isEdit)?_c('el-form-item',{attrs:{\"label\":\"ID\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\",\"disabled\":\"\"},model:{value:(_vm.item.group_id),callback:function ($$v) {_vm.$set(_vm.item, \"group_id\", $$v)},expression:\"item.group_id\"}})],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"group_name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.item.group_name),callback:function ($$v) {_vm.$set(_vm.item, \"group_name\", $$v)},expression:\"item.group_name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"所属公司\",\"prop\":\"company_id\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.item.company_id),callback:function ($$v) {_vm.$set(_vm.item, \"company_id\", $$v)},expression:\"item.company_id\"}},_vm._l((_vm.dict.company),function(company){return _c('el-option',{key:company.company_id,attrs:{\"label\":company.company_name,\"value\":company.company_id}})}))],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showEditDialog = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onDialogComfirm}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1ca892a0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/modules/authsManage/groupsManage.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}